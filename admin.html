<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- MODIFIED: Set a responsive viewport for all devices -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOHSIN ESTATE - KDA Employment Society Korangi Properties</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    
    <!-- Custom CSS -->
    <style>
        :root {
            --primary-color: #0a2d4d; /* Deep Blue */
            --secondary-color: #d4af37; /* Gold Accent */
            --light-gray: #f8f9fa;
            --dark-gray: #343a40;
        }

        body {
            font-family: 'Poppins', sans-serif;
            scroll-behavior: smooth;
            background-color: #f0f2f5; /* A slightly off-white background for a softer look */
        }

        /* --- Ad Container Styles --- */
        .ad-container-top-bottom {
            text-align: center;
            padding: 10px 0;
            background-color: #fff;
        }
        
        .ad-container-side {
            position: fixed;
            top: 100px; /* Position below the navbar */
            width: 160px;
            height: 300px;
            z-index: 1000;
        }

        .ad-left {
            left: 20px;
        }

        .ad-right {
            right: 20px;
        }
        
        /* ADDED: Media query to hide side ads on smaller screens to prevent overlap */
        @media (max-width: 1400px) {
            .ad-container-side {
                display: none;
            }
        }

        .navbar {
            background: linear-gradient(to right, rgba(10, 45, 77, 0.95), rgba(8, 36, 62, 0.9));
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .navbar-brand {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            color: var(--secondary-color) !important;
        }
        .nav-link {
            color: #ffffff;
            font-weight: 500;
            transition: color 0.3s ease;
        }
        .nav-link:hover, .nav-link.active {
            color: var(--secondary-color);
        }

        .hero-section {
            position: relative;
            min-height: 100vh;
            display: flex;
            align-items: center;
            color: white;
            overflow: hidden;
        }
        #hero-video {
            position: absolute;
            top: 50%;
            left: 50%;
            min-width: 100%;
            min-height: 100%;
            width: auto;
            height: auto;
            z-index: -2;
            transform: translateX(-50%) translateY(-50%);
            object-fit: cover;
        }
        .hero-section::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: -1;
        }
        .hero-content h1 {
            font-family: 'Playfair Display', serif;
            /* MODIFIED: Changed fixed font size to be responsive */
            font-size: 2.5rem; 
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.7);
        }
        .hero-content p {
            text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.6);
            font-size: 1.1rem;
        }

        /* ADDED: Media query for larger screens */
        @media (min-width: 768px) {
            .hero-content h1 {
                font-size: 4rem;
            }
        }

        .ticker-wrap {
            background-color: var(--secondary-color);
            padding: 12px 0;
            overflow: hidden;
            white-space: nowrap;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .ticker-move {
            display: inline-block;
            animation: ticker 40s linear infinite;
        }
        .ticker-item {
            display: inline-block;
            color: var(--primary-color);
            font-weight: 600;
            padding: 0 2.5rem;
            font-size: 1rem;
        }
        @keyframes ticker {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }

        .section {
            padding: 80px 0;
        }
        .section-title {
            font-family: 'Playfair Display', serif;
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .property-card {
            background-color: #fff;
            border: none;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .property-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.12);
        }
        .property-image {
            position: relative;
        }
        .property-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            background-color: var(--primary-color);
            color: white;
            padding: 6px 12px;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 500;
        }
        .property-content {
            padding: 25px;
        }
        .property-price {
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--secondary-color);
            margin-top: 10px;
        }
        
        .construction-table {
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
            border-radius: 15px;
            overflow: hidden;
            border: none;
        }

        .team-card {
            text-align: center;
            padding: 30px;
            background: #fff;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
         .team-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 30px rgba(0,0,0,0.12);
        }
        .team-avatar {
            font-size: 3.5rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }
        .team-role {
            color: var(--secondary-color);
            font-weight: 600;
        }

        .contact-info-card {
            background: linear-gradient(135deg, var(--primary-color) 0%, #08243e 100%);
            color: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(10, 45, 77, 0.3);
        }
        .contact-info-card a {
            color: var(--secondary-color);
            transition: color 0.3s ease;
        }
        .contact-info-card a:hover {
            color: #fff;
        }

        .footer {
            background-color: var(--dark-gray);
            color: white;
        }
        .footer-links a {
            color: #ccc;
            text-decoration: none;
            transition: color 0.3s;
        }
        .footer-links a:hover {
            color: var(--secondary-color);
        }

        .btn {
            border-radius: 50px;
            font-weight: 600;
            padding: 10px 25px;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        .btn-primary:hover {
            background-color: #08243e;
            border-color: #08243e;
            transform: translateY(-2px);
        }
        .btn-secondary {
            background-color: var(--secondary-color);
            border-color: var(--secondary-color);
            color: var(--primary-color) !important;
        }
         .btn-secondary:hover {
            background-color: #b8952d;
            border-color: #b8952d;
            transform: translateY(-2px);
        }
        
        .toast-notification {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--primary-color);
            color: white;
            padding: 12px 25px;
            border-radius: 50px;
            z-index: 1060;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }
        .toast-notification.show {
            opacity: 1;
            visibility: visible;
        }
    </style>
</head>
<body>
    
    <!-- Left Side Ad -->
    <div class="ad-container-side ad-left">
        <script type="text/javascript">
            atOptions = {
                'key' : 'ab57a227bcc4369acc8659d06593e497',
                'format' : 'iframe',
                'height' : 300,
                'width' : 160,
                'params' : {}
            };
        </script>
        <script type="text/javascript" src="//www.highperformanceformat.com/ab57a227bcc4369acc8659d06593e497/invoke.js"></script>
    </div>

    <!-- Right Side Ad -->
    <div class="ad-container-side ad-right">
        <script type="text/javascript">
            atOptions = {
                'key' : 'ab57a227bcc4369acc8659d06593e497',
                'format' : 'iframe',
                'height' : 300,
                'width' : 160,
                'params' : {}
            };
        </script>
        <script type="text/javascript" src="//www.highperformanceformat.com/ab57a227bcc4369acc8659d06593e497/invoke.js"></script>
    </div>

    <!-- =============================================== -->
    <!-- ============== NAVIGATION BAR ================= -->
    <!-- =============================================== -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="#home"><i class="fas fa-building-user me-2"></i>MOHSIN ESTATE</a>
            <!-- ADDED: Navbar toggler button for mobile view -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <!-- MODIFIED: Added 'collapse navbar-collapse' classes to make navbar responsive -->
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="#home">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="#properties">Properties</a></li>
                    <li class="nav-item"><a class="nav-link" href="#constructions">Constructions</a></li>
                    <li class="nav-item"><a class="nav-link" href="#team">About Us</a></li>
                    <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
                    <li class="nav-item ms-lg-2 mt-2 mt-lg-0">
                        <a class="nav-link btn btn-secondary text-white px-3 py-2" href="https://wa.me/923362842584" target="_blank" style="line-height: 1;">
                            <i class="fab fa-whatsapp me-1"></i>WhatsApp
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- =============================================== -->
    <!-- ================ HERO SECTION ================= -->
    <!-- =============================================== -->
    <section id="home" class="hero-section">
        <video id="hero-video" poster="https://images.unsplash.com/photo-1582407947304-fd86f028f716?q=80&w=1992&auto=format&fit=crop" autoplay loop muted playsinline>
            <source src="https://storage.googleapis.com/generativeai_demo_data/4427211-hd_1920_1080_25fps.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <div class="container text-center">
            <div class="hero-content">
                <h1 class="display-3 fw-bold mb-4">Your Premier Real Estate Partner in KDA Korangi</h1>
                <p class="lead mb-5">Discover exceptional properties for sale and rent, and build your dream home with our expert construction services.</p>
                <!-- MODIFIED: Made button group responsive -->
                <div class="d-grid gap-2 d-sm-flex justify-content-sm-center">
                    <a href="#properties" class="btn btn-secondary btn-lg">Explore Properties</a>
                    <a href="#contact" class="btn btn-outline-light btn-lg">Get In Touch</a>
                </div>
            </div>
        </div>
    </section>
    
    <!-- =============================================== -->
    <!-- =============== TICKER SECTION ================ -->
    <!-- =============================================== -->
    <div class="ticker-wrap">
        <div class="ticker-move">
            <div class="ticker-item">For Sale: 240 Sq. Yd. House in Sector 31-B</div>
            <div class="ticker-item">For Rent: 120 Sq. Yd. Upper Portion in Allahwala Town</div>
            <div class="ticker-item">New Construction Project Started in Sector 32-A</div>
            <div class="ticker-item">For Sale: 80 Sq. Yd. Corner House</div>
            <div class="ticker-item">Contact us for construction rates!</div>
            <div class="ticker-item">For Sale: 240 Sq. Yd. House in Sector 31-B</div>
            <div class="ticker-item">For Rent: 120 Sq. Yd. Upper Portion in Allahwala Town</div>
            <div class="ticker-item">New Construction Project Started in Sector 32-A</div>
        </div>
    </div>

    <!-- Top Inline Ad -->
    <div class="ad-container-top-bottom">
        <script type="text/javascript">
            atOptions = {
                'key' : 'bbb39fa2df38b4031f13f19c6a9db940',
                'format' : 'iframe',
                'height' : 50,
                'width' : 320,
                'params' : {}
            };
        </script>
        <script type="text/javascript" src="//www.highperformanceformat.com/bbb39fa2df38b4031f13f19c6a9db940/invoke.js"></script>
    </div>

    <!-- =============================================== -->
    <!-- ============== PROPERTIES SECTION ============= -->
    <!-- =============================================== -->
    <section id="properties" class="section">
        <div class="container">
            <div class="text-center mb-5 position-relative">
                <h2 class="section-title">Featured Properties</h2>
                <p class="text-muted fs-5">A selection of premium homes available in KDA Employment Society, Korangi.</p>
                
                <!-- MODIFIED: Add Property button for desktop. Smaller and hidden on mobile. -->
                <a href="admin.html" class="btn btn-primary btn-sm position-absolute d-none d-md-inline-block" style="top: 0; right: 0;">
                    <i class="fas fa-plus me-1"></i> Add Property
                </a>
                
                <!-- MODIFIED: Add Property button for mobile. Integrated into the flow and hidden on desktop. -->
                <div class="d-md-none mt-3">
                     <a href="admin.html" class="btn btn-primary btn-sm">
                        <i class="fas fa-plus me-1"></i> Add Property
                    </a>
                </div>
            </div>

            <div id="property-listings" class="row g-4 justify-content-center">
                <!-- Property cards will be dynamically injected here by JavaScript -->
            </div>

        </div>
    </section>

    <!-- =============================================== -->
    <!-- ============ CONSTRUCTIONS SECTION ============ -->
    <!-- =============================================== -->
    <section id="constructions" class="section bg-light">
        <div class="container">
            <div class="text-center mb-5">
                 <h2 class="section-title">Construction Services</h2>
                <p class="text-muted fs-5">Build with confidence. We offer transparent, high-quality construction services.</p>
            </div>
            
            <div class="card construction-table">
                <div class="card-header bg-primary text-white text-center py-3">
                   <h4>üèóÔ∏è Construction Rate Chart (KDA Employees Society, Korangi)</h4>
                </div>
                <div class="table-responsive">
                    <table class="table table-striped table-hover mb-0 fs-6">
                        <thead class="table-dark">
                            <tr>
                                <th class="py-3 px-3">Category</th>
                                <th class="py-3 px-3">Rate (PKR / Sq.Ft.)</th>
                                <th class="py-3 px-3">Details</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="py-3 px-3"><strong>Grey Structure (Labor Only)</strong></td>
                                <td class="py-3 px-3">950 ‚Äì 1,050</td>
                                <td class="py-3 px-3">Masonry, plaster, shuttering, steel fixing</td>
                            </tr>
                            <tr>
                                <td class="py-3 px-3"><strong>Grey Structure (With Material)</strong></td>
                                <td class="py-3 px-3">2,200 ‚Äì 2,500</td>
                                <td class="py-3 px-3">Complete grey structure with cement, steel, sand, crush</td>
                            </tr>
                            <tr>
                                <td class="py-3 px-3"><strong>Finishing (Basic)</strong></td>
                                <td class="py-3 px-3">1,200 ‚Äì 1,500</td>
                                <td class="py-3 px-3">Tiles, paint, woodwork, electric fittings</td>
                            </tr>
                            <tr>
                                <td class="py-3 px-3"><strong>Finishing (Premium)</strong></td>
                                <td class="py-3 px-3">2,000 ‚Äì 2,500</td>
                                <td class="py-3 px-3">Imported tiles, premium paint, wooden doors, lighting</td>
                            </tr>
                            <tr>
                                <td class="py-3 px-3"><strong>Turnkey Package (Standard)</strong></td>
                                <td class="py-3 px-3">3,500 ‚Äì 3,800</td>
                                <td class="py-3 px-3">Full construction ‚Äì grey + finishing</td>
                            </tr>
                            <tr>
                                <td class="py-3 px-3"><strong>Turnkey Package (Luxury)</strong></td>
                                <td class="py-3 px-3">4,200 ‚Äì 4,800</td>
                                <td class="py-3 px-3">Premium construction ‚Äì luxury materials & modern design</td>
                            </tr>
                             <tr>
                                <td class="py-3 px-3"><strong>Commercial Construction</strong></td>
                                <td class="py-3 px-3">5,000 ‚Äì 6,000</td>
                                <td class="py-3 px-3">Offices, shops, plazas (with high-grade material)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="card-footer text-center py-3">
                    <p class="mb-2 text-muted">Rates are estimates and may vary based on project scope and material choices. Contact us for a detailed quote!</p>
                    <a href="https://wa.me/923042632003?text=I would like a detailed quote for my construction project." class="btn btn-success mt-2">
                        <i class="fab fa-whatsapp me-2"></i>Get a Quote from Naqash (Contractor)
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- =============================================== -->
    <!-- ================== TEAM SECTION =============== -->
    <!-- =============================================== -->
    <section id="team" class="section">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="section-title">Meet Our Professional Team</h2>
                <p class="text-muted fs-5">The experts dedicated to making your real estate goals a reality.</p>
            </div>
            <div class="row g-4 justify-content-center">
                <!-- MODIFIED: Added responsive classes for different screen sizes -->
                <div class="col-12 col-sm-6 col-lg-3">
                    <div class="team-card">
                        <div class="team-avatar"><i class="fas fa-user-tie"></i></div>
                        <h5>MOHSIN</h5>
                        <p class="team-role">Director</p>
                        <a href="tel:+923362842584" class="text-decoration-none text-dark">+92 336 2842584</a>
                    </div>
                </div>
                <div class="col-12 col-sm-6 col-lg-3">
                    <div class="team-card">
                        <div class="team-avatar"><i class="fas fa-user-gear"></i></div>
                        <h5>RAFIQ</h5>
                        <p class="team-role">Deputy Director</p>
                        <a href="tel:+923013313129" class="text-decoration-none text-dark">+92 301 3313129</a>
                    </div>
                </div>
                 <div class="col-12 col-sm-6 col-lg-3">
                    <div class="team-card">
                        <div class="team-avatar"><i class="fas fa-bullhorn"></i></div>
                        <h5>NOMAN</h5>
                        <p class="team-role">Marketing Head</p>
                        <a href="tel:+923332491993" class="text-decoration-none text-dark">+92 333 2491993</a>
                    </div>
                </div>
                <div class="col-12 col-sm-6 col-lg-3">
                    <div class="team-card">
                        <div class="team-avatar"><i class="fas fa-hard-hat"></i></div>
                        <h5>NAQASH</h5>
                        <p class="team-role">Contractor</p>
                        <a href="tel:+923042632003" class="text-decoration-none text-dark">+92 304 2632003</a>
                    </div>
                </div>
                 <div class="col-12 col-sm-6 col-lg-3">
                    <div class="team-card">
                        <div class="team-avatar"><i class="fas fa-users"></i></div>
                        <h5>WASIM</h5>
                        <p class="team-role">Coordinator</p>
                         <p class="text-muted">Ensuring smooth operations</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- =============================================== -->
    <!-- ================ CONTACT SECTION ============== -->
    <!-- =============================================== -->
    <section id="contact" class="section bg-light">
        <div class="container">
             <div class="text-center mb-5">
                <h2 class="section-title">Get In Touch</h2>
                <p class="text-muted fs-5">We're here to help with all your property and construction needs.</p>
            </div>
            <div class="row g-4">
                <div class="col-lg-7">
                     <div class="card p-4 p-md-5 border-0 shadow-sm">
                        <h4 class="mb-4">Send us a Message</h4>
                        <form>
                            <div class="row">
                                <!-- MODIFIED: Added responsive classes to stack on mobile -->
                                <div class="col-12 col-md-6 mb-3">
                                    <label for="name" class="form-label">Full Name</label>
                                    <input type="text" class="form-control" id="name" required>
                                </div>
                                <div class="col-12 col-md-6 mb-3">
                                    <label for="phone" class="form-label">Phone Number</label>
                                    <input type="tel" class="form-control" id="phone" required>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="interest" class="form-label">I'm interested in...</label>
                                <select class="form-select" id="interest">
                                    <option>Buying a Property</option>
                                    <option>Selling a Property</option>
                                    <option>Renting a Property</option>
                                    <option>Construction Services</option>
                                    <option>General Inquiry</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="message" class="form-label">Message</label>
                                <textarea class="form-control" id="message" rows="4" required></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary w-100">Send Message</button>
                        </form>
                    </div>
                </div>
                 <div class="col-lg-5">
                    <div class="contact-info-card h-100 d-flex flex-column justify-content-center">
                        <h4 class="mb-4 text-white">Contact Information</h4>
                        <div class="d-flex mb-3">
                            <i class="fas fa-map-marker-alt fa-2x me-3 mt-1" style="color: var(--secondary-color);"></i>
                            <div>
                                <h6 class="text-white">Office Address</h6>
                                <p class="mb-0">R4H6+8P7, KDA Employees Rd, Allahwala Town - Sector 31B, Korangi, Karachi</p>
                            </div>
                        </div>
                        <div class="d-flex mb-3">
                           <i class="fas fa-phone fa-2x me-3 mt-1" style="color: var(--secondary-color);"></i>
                            <div>
                                <h6 class="text-white">Director's Phone</h6>
                                <p class="mb-0"><a href="tel:+923362842584">+92 336 2842584</a></p>
                            </div>
                        </div>
                        <div class="d-flex">
                           <i class="fab fa-whatsapp fa-2x me-3 mt-1" style="color: var(--secondary-color);"></i>
                            <div>
                                <h6 class="text-white">WhatsApp Inquiry</h6>
                                <a href="https://wa.me/923362842584" target="_blank" class="btn btn-light btn-sm">Chat with us now</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mt-5">
                <div class="card border-0 shadow-sm" style="border-radius: 15px; overflow: hidden;">
                     <div class="card-header text-center bg-white py-3">
                         <h5><i class="fas fa-map-marked-alt me-2 text-primary"></i>Find Our Office Location</h5>
                     </div>
                    <div class="card-body p-0">
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3620.019939524583!2d67.1105938150029!3d24.8631779840523!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3eb33b0b0d3d5f4d%3A0x3e1f7bdf01faf4!2sKDA%20Employees%20Society!5e0!3m2!1sen!2s!4v1672522512345!5m2!1sen!2s"
                            width="100%" 
                            height="450" 
                            style="border:0;" 
                            allowfullscreen="" 
                            loading="lazy" 
                            referrerpolicy="no-referrer-when-downgrade">
                        </iframe>
                    </div>
                    <div class="card-footer text-center py-3">
                        <a href="https://share.google/Nm5kSRl2rlqAA7ZuF" target="_blank" class="btn btn-primary">
                            <i class="fas fa-directions me-2"></i>Get Directions on Google Maps
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Bottom Inline Ad -->
    <div class="ad-container-top-bottom">
        <script type="text/javascript">
            atOptions = {
                'key' : 'bbb39fa2df38b4031f13f19c6a9db940',
                'format' : 'iframe',
                'height' : 50,
                'width' : 320,
                'params' : {}
            };
        </script>
        <script type="text/javascript" src="//www.highperformanceformat.com/bbb39fa2df38b4031f13f19c6a9db940/invoke.js"></script>
    </div>

    <!-- =============================================== -->
    <!-- =================== FOOTER ==================== -->
    <!-- =============================================== -->
    <footer class="footer pt-5 pb-4">
        <div class="container">
            <div class="row">
                <!-- MODIFIED: Added responsive classes to stack footer columns on mobile -->
                <div class="col-lg-4 col-md-6 mb-4 mb-lg-0">
                    <h5 class="text-white mb-3"><i class="fas fa-building-user me-2"></i>MOHSIN ESTATE</h5>
                    <p class="text-muted">Your trusted partner for premium properties and construction in KDA Employment Society, Korangi.</p>
                </div>
                 <div class="col-lg-4 col-md-6 mb-4 mb-lg-0">
                    <h5 class="text-white mb-3">Quick Links</h5>
                    <ul class="list-unstyled footer-links">
                        <li><a href="#home">Home</a></li>
                        <li><a href="#properties">Properties</a></li>
                        <li><a href="#constructions">Constructions</a></li>
                        <li><a href="#team">About Us</a></li>
                        <li><a href="#contact">Contact</a></li>
                    </ul>
                </div>
                <div class="col-lg-4 col-md-12">
                    <h5 class="text-white mb-3">Contact Info</h5>
                    <p class="text-muted mb-2"><i class="fas fa-map-marker-alt me-2"></i>KDA Employees Society, Korangi, Karachi</p>
                    <p class="text-muted mb-2"><i class="fas fa-phone me-2"></i><a href="tel:+923362842584" class="text-muted text-decoration-none">+92 336 2842584</a></p>
                     <a href="https://wa.me/923362842584" class="btn btn-success btn-sm" target="_blank">
                        <i class="fab fa-whatsapp me-1"></i>WhatsApp Us
                    </a>
                </div>
            </div>
            <hr class="my-4" style="border-color: rgba(255,255,255,0.2);">
            <div class="text-center">
                 <p class="text-muted mb-0">&copy; 2024 MOHSIN ESTATE. All Rights Reserved.</p>
                 <a href="admin.html" target="_blank" style="font-size: 0.8rem; text-decoration: none; color: #d4af37; font-weight: 500;">Admin Login</a>
            </div>
        </div>
    </footer>

    <!-- Property Details Modal (for shared links and detail view) -->
    <div class="modal fade" id="propertyDetailModal" tabindex="-1" aria-labelledby="propertyDetailModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content" id="modalContent"></div>
        </div>
    </div>

    <!-- Share Options Modal -->
    <div class="modal fade" id="shareOptionsModal" tabindex="-1" aria-labelledby="shareOptionsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="shareOptionsModalLabel">Share Property</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <div id="share-loading" class="text-center">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Generating link...</span>
                        </div>
                        <p class="mt-2">Generating short link...</p>
                    </div>
                    <div id="share-content" class="d-none">
                        <p>Share this property via WhatsApp or copy the short link.</p>
                        <div class="input-group mb-3">
                            <input type="text" id="shortLinkInput" class="form-control" value="" readonly>
                            <button class="btn btn-primary" id="copyLinkBtn" title="Copy link to clipboard">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                        <div class="d-grid">
                            <a href="#" id="shareViaWhatsAppBtn" class="btn btn-success" target="_blank" rel="noopener noreferrer">
                                <i class="fab fa-whatsapp me-2"></i>Share on WhatsApp
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div id="toast" class="toast-notification">Short link copied to clipboard!</div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" defer></script>
    
    <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function() {
            if (!sessionStorage.getItem('adShown')) {
                const showAdOnClick = () => {
                    sessionStorage.setItem('adShown', 'true');
                    const adScript = document.createElement('script');
                    adScript.type = 'text/javascript';
                    adScript.src = '//pl27400430.profitableratecpm.com/be/2e/06/be2e06ec9e2276671d155fc84fcfca02.js';
                    document.body.appendChild(adScript);
                    document.body.removeEventListener('click', showAdOnClick);
                };
                document.body.addEventListener('click', showAdOnClick);
            }
        });
    </script>
    
    <script>
        // --- IndexedDB Helper (Copied from admin.html) ---
        const propertyDB = {
            db: null,
            init: function() {
                return new Promise((resolve, reject) => {
                    if (this.db) return resolve();
                    const request = indexedDB.open('mohsinEstateDB', 1);
                    request.onerror = (e) => reject("DB Error: " + e.target.errorCode);
                    request.onsuccess = (e) => { this.db = e.target.result; resolve(); };
                    request.onupgradeneeded = (e) => {
                        const db = e.target.result;
                        if (!db.objectStoreNames.contains('properties')) {
                            db.createObjectStore('properties', { keyPath: 'id' });
                        }
                    };
                });
            },
            async getAll() {
                await this.init();
                return new Promise((resolve, reject) => {
                    const transaction = this.db.transaction('properties', 'readonly');
                    const store = transaction.objectStore('properties');
                    const request = store.getAll();
                    request.onsuccess = () => resolve(request.result);
                    request.onerror = (e) => reject(e.target.error);
                });
            },
            async getById(id) {
                await this.init();
                return new Promise((resolve, reject) => {
                    const transaction = this.db.transaction('properties', 'readonly');
                    const store = transaction.objectStore('properties');
                    const request = store.get(id);
                    request.onsuccess = () => resolve(request.result);
                    request.onerror = (e) => reject(e.target.error);
                });
            }
        };

        document.addEventListener('DOMContentLoaded', async function() {
            const propertyListingsContainer = document.getElementById('property-listings');
            let allProperties = [];
            
            // --- RENDER PROPERTY CARDS ON MAIN PAGE ---
            const renderProperties = (properties) => {
                if (!properties || properties.length === 0) {
                    propertyListingsContainer.innerHTML = '<p class="text-center text-muted col-12">No properties are currently listed. Please check back later or add one via the admin panel.</p>';
                    return;
                }
                
                propertyListingsContainer.innerHTML = '';
                properties.forEach((property) => {
                    const isForRent = property.status === 'For Rent';
                    const badgeColor = isForRent ? '#28a745' : '#0a2d4d';
                    const priceText = isForRent ? `${property.price} / month` : property.price;
                    const mainImage = (property.images && property.images.length > 0) ? property.images[0] : 'https://via.placeholder.com/800x600.png?text=No+Image';

                    const cardHTML = `
                        <div class="col-12 col-md-6 col-lg-4"> 
                            <div class="property-card h-100 d-flex flex-column">
                                <div class="property-image">
                                    <img src="${mainImage}" alt="${property.title}" class="img-fluid" loading="lazy" style="height: 250px; width: 100%; object-fit: cover;">
                                    <div class="property-badge" style="background-color: ${badgeColor};">${property.status}</div>
                                </div>
                                <div class="property-content d-flex flex-column flex-grow-1">
                                    <h5>${property.title}</h5>
                                    <p class="text-muted"><i class="fas fa-map-marker-alt me-2"></i>${property.location}</p>
                                    <div class="d-flex justify-content-between text-muted my-3">
                                        <span><i class="fas fa-bed me-1"></i> ${property.beds} Beds</span>
                                        <span><i class="fas fa-bath me-1"></i> ${property.baths} Baths</span>
                                        <span><i class="fas fa-ruler-combined me-1"></i> ${property.area} Sq.Yd.</span>
                                    </div>
                                    <div class="property-price mt-auto">${priceText}</div>
                                    <div class="d-flex gap-2 mt-3">
                                        <button class="btn btn-primary w-100 view-details-btn" data-id="${property.id}">View Details</button>
                                        <button class="btn btn-outline-secondary share-btn" data-id="${property.id}" title="Share this property">
                                            <i class="fas fa-share-alt"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    propertyListingsContainer.innerHTML += cardHTML;
                });
            };

            // --- RENDER DETAILED PROPERTY MODAL (FOR VIEW DETAILS & SHARED LINKS) ---
            const renderPropertyModal = (property) => {
                if (!property) return;
                
                const isForRent = property.status === 'For Rent';
                const priceText = isForRent ? `${property.price} / month` : property.price;

                // --- VIDEO HTML ---
                let videoHTML = '';
                if (property.video) {
                    // Create a playable URL. Handles both File objects from admin and Base64 from user.
                    const videoSrc = (property.video instanceof File) ? URL.createObjectURL(property.video) : property.video;
                    videoHTML = `<video src="${videoSrc}" class="img-fluid w-100 mb-3" controls style="max-height: 400px;"></video>`;
                }
                
                // --- IMAGE CAROUSEL HTML ---
                let carouselItems = '';
                if (property.images && property.images.length > 0) {
                    property.images.forEach((img, index) => {
                        carouselItems += `<div class="carousel-item ${index === 0 ? 'active' : ''}"><img src="${img}" class="d-block w-100" alt="Property Image ${index + 1}"></div>`;
                    });
                } else {
                    carouselItems = `<div class="carousel-item active"><img src="https://via.placeholder.com/800x600.png?text=No+Image" class="d-block w-100" alt="No Image Available"></div>`;
                }

                const carouselHTML = `
                    <div id="propertyImageCarousel" class="carousel slide" data-bs-ride="carousel">
                        <div class="carousel-inner">${carouselItems}</div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#propertyImageCarousel" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span><span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#propertyImageCarousel" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span><span class="visually-hidden">Next</span>
                        </button>
                    </div>`;

                // --- FINAL MODAL CONTENT ---
                const modalContentHTML = `
                    <div class="modal-header border-0">
                        <h5 class="modal-title" id="propertyDetailModalLabel">${property.title}</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body p-0">
                        ${videoHTML}
                        ${carouselHTML}
                        <div class="p-4">
                            <span class="badge rounded-pill" style="background-color: ${isForRent ? '#28a745' : '#0a2d4d'}; font-size: 1rem;">${property.status}</span>
                            <h3 class="property-price mt-3">${priceText}</h3>
                            <p class="text-muted fs-5"><i class="fas fa-map-marker-alt me-2"></i>${property.location}</p>
                            <div class="d-flex justify-content-around text-center border-top border-bottom py-3 my-3">
                                <div><i class="fas fa-bed fa-2x text-primary"></i><p class="mb-0 mt-1">${property.beds} Beds</p></div>
                                <div><i class="fas fa-bath fa-2x text-primary"></i><p class="mb-0 mt-1">${property.baths} Baths</p></div>
                                <div><i class="fas fa-ruler-combined fa-2x text-primary"></i><p class="mb-0 mt-1">${property.area} Sq.Yd.</p></div>
                            </div>
                            <p>Contact MOHSIN ESTATE for more details on this excellent property opportunity.</p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <a href="https://wa.me/923362842584?text=I'm interested in the ${encodeURIComponent(property.title)}" class="btn btn-success"><i class="fab fa-whatsapp me-2"></i>Contact on WhatsApp</a>
                        <button class="btn btn-primary" data-bs-dismiss="modal">Close</button>
                    </div>
                `;
                
                document.getElementById('modalContent').innerHTML = modalContentHTML;
                const propertyModal = new bootstrap.Modal(document.getElementById('propertyDetailModal'));
                propertyModal.show();
            };

            // --- SHARE FUNCTIONALITY ---
            const showToast = (message) => {
                const toastEl = document.getElementById('toast');
                toastEl.textContent = message;
                toastEl.classList.add('show');
                setTimeout(() => { toastEl.classList.remove('show'); }, 2500);
            };
            
            async function getShortUrl(longUrl) {
                const apiUrl = `https://tinyurl.com/api-create.php?url=${encodeURIComponent(longUrl)}`;
                try {
                    const response = await fetch(apiUrl);
                    if (!response.ok) { throw new Error('Network response was not ok'); }
                    return await response.text();
                } catch (error) {
                    console.error('Failed to shorten URL:', error);
                    return longUrl; // Fallback to the long URL if API fails
                }
            }

            const handleShare = async (propertyId) => {
                const shareModal = new bootstrap.Modal(document.getElementById('shareOptionsModal'));
                const loadingDiv = document.getElementById('share-loading');
                const contentDiv = document.getElementById('share-content');
                
                loadingDiv.classList.remove('d-none');
                contentDiv.classList.add('d-none');
                shareModal.show();

                const longPropertyUrl = `${window.location.origin}${window.location.pathname}?propertyId=${propertyId}`;
                const shortUrl = await getShortUrl(longPropertyUrl);
                
                const property = allProperties.find(p => p.id == propertyId);
                const message = `Check out this property from MOHSIN ESTATE: ${property.title} - ${shortUrl}`;
                const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(message)}`;

                document.getElementById('shortLinkInput').value = shortUrl;
                document.getElementById('shareViaWhatsAppBtn').href = whatsappUrl;
                
                loadingDiv.classList.add('d-none');
                contentDiv.classList.remove('d-none');
            };

            // --- EVENT LISTENERS & INITIALIZATION ---
            propertyListingsContainer.addEventListener('click', function(e) {
                const shareButton = e.target.closest('.share-btn');
                const detailsButton = e.target.closest('.view-details-btn');
                
                if (detailsButton) {
                    const propertyId = Number(detailsButton.dataset.id);
                    const property = allProperties.find(p => p.id === propertyId);
                    renderPropertyModal(property);
                }
                
                if (shareButton) {
                    const propertyId = shareButton.dataset.id;
                    handleShare(propertyId);
                }
            });
            
            document.getElementById('copyLinkBtn').addEventListener('click', function() {
                navigator.clipboard.writeText(document.getElementById('shortLinkInput').value).then(() => {
                    showToast('Short link copied to clipboard!');
                    bootstrap.Modal.getInstance(document.getElementById('shareOptionsModal')).hide();
                });
            });

            const checkUrlForSharedProperty = async () => {
                const params = new URLSearchParams(window.location.search);
                const propertyId = params.get('propertyId');

                if (propertyId) {
                    try {
                        const property = await propertyDB.getById(Number(propertyId));
                        if (property) {
                             renderPropertyModal(property);
                        }
                        // Clean the URL to avoid the modal popping up on every reload
                        window.history.replaceState({}, document.title, window.location.pathname);
                    } catch (e) {
                        console.error('Failed to load shared property:', e);
                    }
                }
            };
            
            // --- INITIAL LOAD ---
            try {
                allProperties = await propertyDB.getAll();
                renderProperties(allProperties);
                await checkUrlForSharedProperty(); // Check for shared link after properties are loaded
            } catch (error) {
                console.error("Failed to load properties:", error);
                propertyListingsContainer.innerHTML = '<p class="text-center text-danger col-12">Could not load properties. Error connecting to the database.</p>';
            }
        });
    </script>
</body>
</html>